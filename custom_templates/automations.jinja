{#
Checks whether an automationâ€™s last trigger happened longer than a given number of seconds ago.
This is useful for implementing cooldowns or preventing an automation from running too frequently.
automation_entity_id: The entity ID of the automation, e.g. "automation.my_automation".
seconds: The minimum number of seconds that must have passed since the automation last triggered.
#}
{%- macro last_triggered_longer_than(automation_entity_id, seconds) -%}
{{ as_timestamp(now()) - as_timestamp(state_attr(automation_entity_id, "last_triggered")) | int >= seconds }}
{%- endmacro -%}
