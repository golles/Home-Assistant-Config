- id: auto_light_woonkamer
  alias: Woonkamer automatisch aan/uit door aanwezigheid
  use_blueprint:
    path: golles/motion-activated_scenes.yaml
    input:
      day_end_time: 00:00:00
      motion_entity: binary_sensor.woonkamer_bezetting
      cool_down: 60
      light_entity: light.wooneet
      illuminance_entity: sensor.woonkamer_lichtsterkte_illuminance_lux
      illuminance_below: 12
      day_start_time: 08:00:00
      day_scene: scene.wooneet_avond
      day_scene_before_off: scene.wooneet_nacht
      night_scene: scene.wooneet_nacht
      night_scene_before_off: scene.wooneet_nacht
      no_motion_wait: 15

- id: auto_light_woonkamer_when_someone_arrives_home
  alias: Automatisch licht aan in de woonkamer wanneer iemand thuis komt
  mode: single
  max_exceeded: silent
  trigger:
    - platform: state
      entity_id: group.residents
      from: not_home
      to: home
  condition:
    - condition: numeric_state
      entity_id: sensor.woonkamer_lichtsterkte_illuminance_lux
      below: 15
  action:
    - alias: Turn on the evening scene
      service: scene.turn_on
      target:
        entity_id: scene.wooneet_avond
      data:
        transition: 1

- id: skull_light_woonkamer
  alias: Skull aan doen als de avond scene actief wordt
  mode: single
  max_exceeded: silent
  trigger:
    - platform: state
      entity_id: light.wooneet
      to: "off"
    - platform: state
      id: aan
      entity_id: scene.wooneet_avond
  action:
    - choose:
      - conditions:
          - condition: trigger
            id: aan
        sequence:
          - alias: Turn on the skull
            service: light.turn_on
            target:
              entity_id: light.wled_skull
            data:
              effect: breathe
              brightness: 128
              xy_color:
                - 0.701
                - 0.299
      default:
          - alias: Turn off the skull
            service: light.turn_off
            target:
              entity_id: light.wled_skull

- id: tv_lights_based_on_source
  alias: TV verlichting aanpassen op basis van de bron
  mode: single
  max_exceeded: silent
  trigger:
    - platform: state
      entity_id: media_player.lg_c9
      attribute: source
      to:
        - Netflix
        - Plex
  condition:
    - condition: numeric_state
      entity_id: sensor.woonkamer_lichtsterkte_illuminance_lux
      below: 10
    - condition: state
      entity_id: media_player.lg_c9
      state: "on" 
    - condition: state
      entity_id: media_player.lg_c9
      attribute: source
      state:
        - Netflix
        - Plex
  action:
    service: scene.turn_on
    data:
      entity_id: scene.wooneet_film
      transition: 1
