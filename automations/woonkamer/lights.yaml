- id: auto_light_woonkamer
  alias: Automatisch licht aan in de woonkamer
  initial_state: on
  trigger:
    - platform: numeric_state
      entity_id: sensor.woonkamer_lichtsterkte_illuminance_lux
      below: 15
      for:
        minutes: 10
    - platform: state
      entity_id: group.residents
      from: 'not_home'
      to: 'home'
    - platform: numeric_state
      entity_id: sun.sun
      attribute: elevation
      below: 20
  condition:
    - condition: state
      entity_id: light.woonkamer
      state: 'off'
    - condition: state
      entity_id: group.residents
      state: 'home'
    - condition: numeric_state
      entity_id: sensor.woonkamer_lichtsterkte_illuminance_lux
      below: 15
    - condition: numeric_state
      entity_id: sun.sun
      attribute: elevation
      below: 20
    - condition: template
      value_template: '{{ is_state_attr("sun.sun", "rising", False) }}'
  action:
    - service: light.turn_on
      data:
        entity_id: light.woonkamer
        profile: ontspannen
        transition: 60 # 1 minute

    - service: light.turn_on
      data:
        entity_id: light.woonkamer
        profile: helder
        transition: 1800 # Half an hour