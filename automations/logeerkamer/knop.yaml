- id: logeerkamer_knop
  alias: Logeerkamer knop
  description: ''
  use_blueprint:
    path: golles/zigbee2mqtt_xiaomi_switch.yaml
    input:
      switch: sensor.logeerkamer_knop_action
      single:
        - choose:
          - conditions:
              - condition: state
                entity_id: light.logeerkamer
                state: "off"
            sequence:
              - choose:
                - conditions:
                    - condition: time
                      after: 08:00:00
                      before: 00:00:00
                  sequence:
                    - service: light.turn_on
                      data:
                        entity_id: light.logeerkamer
                        profile: helder
                default:
                  - service: light.turn_on
                    data:
                      entity_id: light.logeerkamer
                      profile: nachtlampje
          default:
            - service: light.turn_off
              data:
                entity_id: light.logeerkamer
      hold:
        - service: light.turn_on
          data:
            entity_id: light.logeerkamer
            brightness_step: >
              {%- if state_attr('light.logeerkamer', 'brightness') % 2 == 0 %}
                20
              {%- else -%}
                -20
              {%- endif %}
