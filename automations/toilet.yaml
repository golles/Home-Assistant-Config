- id: auto_toilet_light_on
  alias: Toilet lamp automatisch aan
  initial_state: on
  trigger:
    - platform: state
      entity_id: binary_sensor.toilet_beweging_occupancy
      to: 'on'
  condition:
    - condition: state
      entity_id: light.toilet
      state: 'off'
  action:
    - choose:
      - conditions:
          - condition: template
            value_template: '{{ now().hour < 8 }}' # Between 00:00 - 07:59
        sequence:
          - service: light.turn_on
            data:
              entity_id: light.toilet
              profile: ontspannen
              transition: 5
      default:
        - service: light.turn_on
          data:
            entity_id: light.toilet
            profile: helder
            transition: 1

- id: auto_toilet_light_off
  alias: Toilet lamp automatisch uit
  initial_state: on
  trigger:
    - platform: state
      entity_id: binary_sensor.toilet_beweging_occupancy
      to: 'off'
      for:
        seconds: 90
  condition:
    - condition: state
      entity_id: light.toilet
      state: 'on'
  action:
    - service: light.turn_off
      data:
        entity_id: light.toilet
        transition: 2
