ios:
  actions:
    - name: ALARM_CLOCK_OFF
      background_color: "#000000"
      label:
        text: Wekker uit
        color: "#ff0000"
      icon:
        icon: alarm-off
        color: "#ff0000"

    - name: ALARM_CLOCK_SNOOZE
      background_color: "#000000"
      label:
        text: Wekker gesnoozed
        color: "#ff0000"
      icon:
        icon: alarm-snooze
        color: "#ff0000"

automation:
  - id: ios_action_alarm_clock_off
    alias: iOS action - Wekker uit
    initial_state: on
    mode: single
    max_exceeded: silent
    trigger:
      - platform: event
        event_type: ios.action_fired
        event_data:
          actionName: ALARM_CLOCK_OFF
    action:
      - variables:
          user_id: "{{ trigger.event.context.user_id }}"

      - choose:
        - conditions:
            - "{{ is_state_attr('person.sander', 'user_id', user_id) }}"
          sequence: []

  - id: ios_action_alarm_clock_snooze
    alias: iOS action - Wekker gesnoozed
    initial_state: on
    mode: single
    max_exceeded: silent
    trigger:
      - platform: event
        event_type: ios.action_fired
        event_data:
          actionName: ALARM_CLOCK_SNOOZE
    action:
      - variables:
          user_id: "{{ trigger.event.context.user_id }}"

      - choose:
        - conditions:
            - "{{ is_state_attr('person.sander', 'user_id', user_id) }}"
            - "{{ is_state('person.sander', 'home') }}"
          sequence:
            service: cover.set_cover_position
            data:
              entity_id: cover.slaapkamer
              position: 12
