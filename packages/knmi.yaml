sensor:
  - platform: rest
    name: KNMI weer
    scan_interval: 36000 # 60 * 60 * 10
    resource: http://weerlive.nl/api/json-data-10min.php
    params:
      key: !secret knmi_key
      locatie: !secret knmi_location
    value_template: >
      {{ value_json.liveweer[0].samenv }}
    json_attributes_path: liveweer[0]
    json_attributes:
      - plaats
      - temp
      - gtemp
      - samenv
      - lv
      - windr
      - windms
      - winds
      - windk
      - windkmh
      - luchtd
      - ldmmhg
      - dauwp
      - zicht
      - verw
      - sup
      - sunder
      - image
      - d0weer
      - d0tmax
      - d0tmin
      - d0windk
      - d0windknp
      - d0windms
      - d0windkmh
      - d0windr
      - d0neerslag
      - d0zon
      - d1weer
      - d1tmax
      - d1tmin
      - d1windk
      - d1windknp
      - d1windms
      - d1windkmh
      - d1windr
      - d1neerslag
      - d1zon
      - d2weer
      - d2tmax
      - d2tmin
      - d2windk
      - d2windknp
      - d2windms
      - d2windkmh
      - d2windr
      - d2neerslag
      - d2zon
      - alarm

weather:
  - platform: template
    name: KNMI
    condition_template: >
      {% set condition = state_attr('sensor.knmi_weer', 'image')%}
      {% if condition == 'zonnig' %}
        sunny
      {% elif condition == 'bliksem' %}
        lightning
      {% elif condition == 'regen' %}
        rainy
      {% elif condition == 'buien' %}
        rainy
      {% elif condition == 'hagel' %}
        hail
      {% elif condition == 'mist' %}
        fog
      {% elif condition == 'sneeuw' %}
        snowy
      {% elif condition == 'bewolkt' %}
        cloudy
      {% elif condition == 'halfbewolkt' %}
        partlycloudy
      {% elif condition == 'zwaarbewolkt' %}
        cloudy
      {% elif condition == 'nachtmist' %}
        fog
      {% elif condition == 'helderenacht' %}
        clear-night
      {% elif condition == 'wolkennacht' %}
        cloudy
      {% endif %}
    temperature_template: "{{ state_attr('sensor.knmi_weer', 'temp') | float }}"
    humidity_template: "{{ state_attr('sensor.knmi_weer', 'lv') | int }}"
    pressure_template: "{{ state_attr('sensor.knmi_weer', 'luchtd') | float }}"
    wind_speed_template: "{{ state_attr('sensor.knmi_weer', 'windkmh') | float }}"
    # forecast_template: "{{ state_attr('sensor.knmi_weer', 'temp') | float }}"
