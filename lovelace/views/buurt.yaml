title: In de buurt
path: buurt
panel: false
icon: mdi:home-city
badges: []
cards:

  - type: grid
    columns: 3
    square: true
    cards:
      - type: light
        entity: light.voortuin
        icon: mdi:coach-lamp
      - type: light
        entity: light.achtertuin_groep
        icon: mdi:coach-lamp
        name: Achtertuin
      - type: light
        entity: light.gekleurde_licht

  - type: picture-glance
    title: Deurbel laatste
    image: camera.deurbel
    entities: []
    camera_image: camera.deurbel_last_event

  - type: custom:auto-entities
    show_empty: true
    card:
      type: grid
      title: Afval
    card_param: cards
    filter:
      include:
        - domain: sensor
          attributes:
            Wastecollector: purmerend
          options:
            type: custom:button-card
            template: afvalbeheer
    sort:
      method: attribute
      attribute: Days-until
      numeric: true

  - title: P2000
    type: entities
    show_header_toggle: false
    entities:
      - entity: sensor.p2000_dichtbij
        name: Dichtbij
      - entity: sensor.p2000_ambulance
        name: Ambulance
      - entity: sensor.p2000_brandweer
        name: Brandweer
      - entity: sensor.p2000_politie
        name: Politie
      - entity: sensor.p2000_lifeliner_1
        name: Lifeliner 1

  - title: OV
    type: entities
    show_header_toggle: false
    entities:
      - entity: sensor.bushalte_orinocostraat
        icon: mdi:bus
      - type: custom:template-entity-row
        entity: sensor.bushalte_orinocostraat
        icon: mdi:bus-clock
        state: >-
          {% if state_attr("sensor.bushalte_orinocostraat", "arrivals") | length > 1 %}
            {% set timestamp = state_attr("sensor.bushalte_orinocostraat", "arrivals")[1].ts | default(0) | int %}
            {% set punctuality = state_attr("sensor.bushalte_orinocostraat", "arrivals")[1].punctuality | default(0) | int %}
            {{ ((timestamp + punctuality) | timestamp_local).split(" ")[1] | default("") }}
          {% else %}
            unavailable
          {% endif %}
      - type: custom:template-entity-row
        entity: sensor.bushalte_orinocostraat
        icon: mdi:bus-clock
        state: >-
          {% if state_attr("sensor.bushalte_orinocostraat", "arrivals") | length > 2 %}
            {% set timestamp = state_attr("sensor.bushalte_orinocostraat", "arrivals")[2].ts | default(0) | int %}
            {% set punctuality = state_attr("sensor.bushalte_orinocostraat", "arrivals")[2].punctuality | default(0) | int %}
            {{ ((timestamp + punctuality) | timestamp_local).split(" ")[1] | default("") }}
          {% else %}
            unavailable
          {% endif %}

  - type: picture-elements
    image: "https://www.ultimatespecs.com/cargallery/16/6523/Volkswagen-Golf-7-2.jpg"
    elements:
      - type: state-label
        entity: sensor.golf_7_expdate
        prefix: "APK: "
        style:
          color: black
          top: 95%
          left: 20%
      - type: state-label
        entity: binary_sensor.golf_7_insured
        prefix: "Verzekerd: "
        style:
          color: black
          top: 95%
          left: 53%
      - type: state-label
        entity: sensor.golf_7_recall
        prefix: "Terugroep: "
        style:
          color: black
          top: 95%
          left: 85%

  - type: entities
    show_header_toggle: false
    entities:
      - sensor.tango_purmerend
      - sensor.tango_winschoten
