title: Aquarium
path: aquarium
icon: mdi:fishbowl-outline
type: sections
sections:
  - type: custom:mushroom-chips-card
    chips:
      - type: template
        tap_action:
          action: navigate
          navigation_path: /lovelace/welkom
        icon: mdi:arrow-left-bold
        content: Overzicht
    layout_options:
      grid_columns: full

  - type: grid
    column_span: 4
    cards:
      - type: heading
        heading: Aquarium
        heading_style: title
        icon: mdi:fishbowl-outline

  - type: grid
    cards:
      - type: heading
        heading: Status
        heading_style: subtitle
      - type: tile
        entity: light.aquarium_licht
        name: Lamp
      - type: tile
        entity: sensor.aquarium_watertemperatuur
        name: Temperatuur

  - type: grid
    cards:
      - type: heading
        heading: Verlichting
        heading_style: subtitle
      - type: tile
        entity: button.aquarium_preset_1
        name: Preset 1
      - type: tile
        entity: button.aquarium_preset_2
        name: Preset 2
      - type: tile
        entity: button.aquarium_preset_3
        name: Preset 3
      - type: tile
        entity: button.aquarium_preset_4
        name: Preset 4

  - type: grid
    cards:
      - type: heading
        heading: Sensoren
        heading_style: subtitle
      - type: tile
        entity: binary_sensor.aquarium_connectiviteit
        name: Status
      - type: tile
        entity: binary_sensor.aquarium_watertemperatuur
        name: Temperatuur
      - type: tile
        entity: binary_sensor.aquarium_pomp_lekkage_water_leak
        name: Pomp lekkage

  - type: grid
    cards:
      - type: heading
        heading: Stroom schakelaars
        heading_style: subtitle
      - type: tile
        entity: switch.aquarium_verlichting_plug
        name: Verlichting
      - type: tile
        entity: switch.aquarium_pomp_plug
        name: Pomp
      - type: tile
        entity: switch.aquarium_verwarming_plug
        name: Verwarming
      - type: tile
        entity: switch.aquarium_skimmer_plug
        name: Skimmer

  - type: grid
    column_span: 4
    cards:
      - type: heading
        heading: Statistiek
        heading_style: subtitle

      - type: custom:apexcharts-card
        graph_span: 14d
        span:
          start: day
          offset: "-13d"
        all_series_config:
          stroke_width: 2
        section_mode: true
        grid_options:
          columns: full
        yaxis:
          - decimals: 2
            apex_config:
              title:
                text: Verbruik (kWh)
        apex_config:
          tooltip:
            x:
              format: d MMMM yyyy
            y:
              formatter: |
                EVAL:function(value, { series, seriesIndex, dataPointIndex, w }) {
                  if (value === null) {
                    return "0 kWh";
                  }
                  return value.toFixed(2) + " kWh";
                }
        series:
          - entity: sensor.aquarium_pomp_plug_energy
            name: Pomp
            color: "#4269d0"
            opacity: 0.5
            type: column
            group_by:
              duration: 1d
              func: diff
          - entity: sensor.aquarium_verlichting_plug_energy
            name: Verlichting
            color: "#f4bd4a"
            opacity: 0.5
            type: column
            group_by:
              duration: 1d
              func: diff
          - entity: sensor.aquarium_verwarming_plug_energy
            name: Verwarming
            color: "#ff725c"
            opacity: 0.5
            type: column
            group_by:
              duration: 1d
              func: diff
          - entity: sensor.aquarium_skimmer_plug_energy
            name: Skimmer
            color: "#4ac98b"
            opacity: 0.5
            type: column
            group_by:
              duration: 1d
              func: diff

      - type: custom:apexcharts-card
        graph_span: 14d
        span:
          start: day
          offset: "-13d"
        all_series_config:
          stroke_width: 2
        section_mode: true
        grid_options:
          columns: full
        yaxis:
          - decimals: 1
            min: "|-1|"
            max: "|+1|"
            apex_config:
              title:
                text: Temperatuur (Â°C)
        series:
          - entity: sensor.aquarium_watertemperatuur
            name: Aquarium temperatuur
            color: "#4269d0"
            opacity: 0.5
            fill_raw: last
            group_by:
              func: avg
              duration: 30min
          - entity: sensor.woonkamer_temperatuur
            name: Kamer temperatuur
            color: "#ff725c"
            opacity: 0.5
            fill_raw: last
            group_by:
              func: avg
              duration: 30min
