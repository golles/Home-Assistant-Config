title: Internet
path: internet
panel: false
icon: mdi:web
badges: []
cards:

  - type: vertical-stack
    cards:
      - type: markdown
        title: Ziggo storingen
        entities:
          - sensor.ziggo_incidents
        content: >-
          {% if not state_attr(config.entities[0], 'outages') -%}
            Geen
          {% else %}
            {% for outage in state_attr(config.entities[0], 'outages') -%}
            **[{{ outage.status }}]: {{ outage.title }}**
            
            {{ outage.announcement }}
            
            Verwachte opgelost: {{ outage.expected_solv_time }}
            
            {%- endfor %}
          {%- endif %}

      - type: entities
        title: Internet
        entities:
          - sensor.myip
          - entity: sensor.speedtest_download
            name: Download
            secondary_info: last-changed
          - entity: sensor.speedtest_upload
            name: Upload
            secondary_info: last-changed
          - entity: sensor.speedtest_ping
            name: Ping
            secondary_info: last-changed

      - type: horizontal-stack
        cards:
          - type: sensor
            entity: sensor.speedtest_download
            graph: line
            name: Download

          - type: sensor
            entity: sensor.speedtest_upload
            graph: line
            name: Upload

          - type: sensor
            entity: sensor.speedtest_ping
            graph: line
            name: Ping

  - type: custom:auto-entities
    card:
      type: entities
      title: Certificaten
      show_header_toggle: false
    filter:
      include:
        - entity_id: 'sensor.cert_expiry_*'
    sort:
      method: name

  - type: entities
    title: AdGuard Home primair
    show_header_toggle: false
    entities:
      - sensor.adguard_dns_queries
      - sensor.adguard_dns_queries_blocked
      - sensor.adguard_dns_queries_blocked_ratio
      - sensor.adguard_average_processing_speed
      - switch.adguard_protection
      - switch.adguard_filtering
      - switch.adguard_parental_control

  - type: entities
    title: AdGuard secundair
    show_header_toggle: false
    entities:
      - sensor.adguard_dns_queries_2
      - sensor.adguard_dns_queries_blocked_2
      - sensor.adguard_dns_queries_blocked_ratio_2
      - sensor.adguard_average_processing_speed_2
      - switch.adguard_protection_2
      - switch.adguard_filtering_2
      - switch.adguard_parental_control_2

  - type: entities
    show_header_toggle: false
    entities:
      - type: custom:fold-entity-row
        head:
          type: section
          label: Instellingen
        padding: 0
        entities:
          - type: button
            name: Run Speedtest
            icon: mdi:speedometer
            show_state: false
            tap_action:
              action: call-service
              service: homeassistant.update_entity
              target:
                entity_id: sensor.speedtest_download
